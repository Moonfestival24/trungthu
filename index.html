<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<title>Đêm Trung Thu Tangled</title>
<link rel="icon" href="./den.png" type="image/png">

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  height: 100%;
  background: radial-gradient(circle at bottom, #0a0a2a, #000);
  font-family: 'Segoe UI', sans-serif;
  color: #fff;
}
body {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  box-sizing: border-box;
}

/* 🌕 TRĂNG */
.moon {
  position: absolute;
  top: 60px;
  right: 100px;
  width: 160px;
  height: 160px;
  background: radial-gradient(circle at 30% 30%, #fff, #f8f8f8 70%, #e0e0e0 100%);
  border-radius: 50%;
  box-shadow: 
    0 0 70px #fff,
    0 0 140px rgba(255,255,255,0.7),
    0 0 220px rgba(255,255,255,0.4);
  filter: drop-shadow(0 0 25px rgba(255,255,200,0.8));
  animation: moonGlow 6s ease-in-out infinite;
  z-index: 10;
}

@keyframes moonGlow {
  0%, 100% {
    box-shadow: 
      0 0 70px #fff,
      0 0 140px rgba(255,255,255,0.7),
      0 0 220px rgba(255,255,255,0.4);
    filter: drop-shadow(0 0 25px rgba(255,255,200,0.8));
  }
  50% {
    box-shadow: 
      0 0 90px #fff,
      0 0 180px rgba(255,255,255,0.9),
      0 0 250px rgba(255,255,255,0.6);
    filter: drop-shadow(0 0 40px rgba(255,255,220,1));
  }
}

/* ✨ SAO */
.star {
  position: absolute;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: twinkle 2s infinite alternate;
}
@keyframes twinkle {
  from { opacity: 0.2; }
  to { opacity: 1; }
}

/* 🌠 SAO BĂNG */
.shooting-star {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  opacity: 0.8;
  transform: rotate(45deg);
  filter: blur(1px);
  animation: shooting linear infinite;
}
@keyframes shooting {
  0% { transform: translate(0,0) rotate(45deg); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translate(100vw,100vh) rotate(45deg); opacity: 0; }
}

/* 🏮 ĐÈN BAY */
.lantern {
  position: absolute;
    bottom: -150px;
  width: 60px;
  height: 80px;
  animation: floatUp linear infinite;
}
@keyframes floatUp {
  0% { transform: translateY(0) scale(0.9); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateY(-120vh) scale(1.1); opacity: 0; }
}

/* ✨ Bấc đèn phát sáng */
.wick {
  position: absolute;
  bottom: 2px;
  left: 50%;
  width: 12px;
  height: 12px;
  transform: translateX(-50%);
  border-radius: 50%;
  background: radial-gradient(circle, #fff, #ffae00);
  box-shadow: 0 0 25px #fff, 0 0 50px #ffae00, 0 0 60px #ffd700;
  animation: flicker 1.5s infinite alternate;
}
@keyframes flicker {
  0% { box-shadow: 0 0 20px #fff, 0 0 40px #ffae00, 0 0 50px #ffd700; }
  50% { box-shadow: 0 0 25px #fff, 0 0 45px #ffae00, 0 0 60px #ffd700; }
  100% { box-shadow: 0 0 20px #fff, 0 0 40px #ffae00, 0 0 50px #ffd700; }
}

/* 📜 LỜI CHÚC */
#message {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 20px;
  font-weight: bold;
  text-shadow: 0 0 10px #fff;
  white-space: pre-line;
  z-index: 5;
  text-align: center;
  
  max-width: 90vw;
  word-break: break-word;
  overflow-wrap: break-word;
}
@media (max-width: 600px) {
  #message {
    font-size: 16px;
    max-width: 95vw;
  }
}


</style>
</head>
<body>

<div class="moon"></div>
<div id="message"></div>
<audio id="bgm" src="https://cdn.pixabay.com/download/audio/2023/09/29/audio_162ba8b5a2.mp3?filename=kan-yueliang-pa-shang-lai.mp3"></audio>
<audio id="bg-music" src="a.mp3" preload="auto"></audio>

<script>
// 🌟 SAO
for (let i = 0; i < 150; i++) {
  const star = document.createElement('div');
  star.className = 'star';
  const size = Math.random() * 2 + 1;
  star.style.width = size + 'px';
  star.style.height = size + 'px';
  star.style.left = Math.random() * 100 + 'vw';
  star.style.top = Math.random() * 100 + 'vh';
  star.style.animationDuration = (1 + Math.random() * 2) + 's';
  document.body.appendChild(star);
}

// 🌠 SAO BĂNG
function createShootingStar() {
  const shooting = document.createElement('div');
  shooting.className = 'shooting-star';
  shooting.style.left = Math.random() * 100 + 'vw';
  shooting.style.top = Math.random() * 50 + 'vh';
  shooting.style.animationDuration = (1 + Math.random() * 1.5) + 's';
  document.body.appendChild(shooting);
  shooting.addEventListener('animationend', () => shooting.remove());
}
setInterval(createShootingStar, 1000);

// 🏮 TẠO ĐÈN BAY (có PNG + bấc sáng)
function createLantern() {
  const lantern = document.createElement('div');
  lantern.className = 'lantern';

  const depth = 0.5 + Math.random() * 0.7;
  lantern.style.left = Math.random() * 100 + 'vw';
  lantern.style.animationDuration = (20 - depth * 10) + 's';
  lantern.style.zIndex = Math.floor(depth * 100);
  lantern.style.opacity = depth;
  lantern.style.transform = `scale(${depth})`;

  const img = document.createElement('img');
  img.src = "./den.png";
  img.style.width = "100%";
  img.style.height = "auto";
  img.style.display = "block";
  img.style.filter = "drop-shadow(0 0 8px rgba(255,200,150,0.6))";
  lantern.appendChild(img);

  const wick = document.createElement('div');
  wick.className = 'wick';
  lantern.appendChild(wick);

  document.body.appendChild(lantern);

  lantern.addEventListener('animationend', () => lantern.remove());
}

setInterval(createLantern, 1000);


// 📜 LỜI CHÚC
const text = "中秋佳节愿你花好月圆，心中梦圆，左右逢源，生活一年胜一年。\n祝你开心无论身在何方，阖家幸福，月满人团圆！";
let i = 0;
const messageEl = document.getElementById('message');
function typeWriter() {
  if (i < text.length) {
    messageEl.textContent += text.charAt(i);
    i++;
    setTimeout(typeWriter, 100);
  }
}
typeWriter();

// 🎵 NHẠC TỰ PHÁT
function startMusic() {
  const bgm = document.getElementById('bgm');
  bgm.volume = 0.7;
  bgm.play().catch(() => {});
}
window.addEventListener('load', () => setTimeout(startMusic, 2000));

const music = document.getElementById('bg-music');

  // Thử tự phát khi trang load
  window.addEventListener('load', () => {
    music.play().catch(() => {
      // Nếu bị chặn, đợi người dùng chạm
      const unlock = () => {
        music.play();
        document.removeEventListener('click', unlock);
        document.removeEventListener('touchstart', unlock);
      };
      document.addEventListener('click', unlock);
      document.addEventListener('touchstart', unlock);
    });
  });
</script>
</body>
</html>
